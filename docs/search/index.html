<!DOCTYPE html>
<html lang="ja" itemscope itemtype="http://schema.org/WebPage">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">


<title>記事検索 | 名古屋サンプルブログ</title>


<meta name="generator" content="Hugo 0.118.2">

  <meta name="author" content="高橋 元">


  <link rel="author" href="https://github.com/curegit/nagoya">

<link rel="canonical" href="https://curegit.github.io/nagoya-example/search/">

  <link rel="alternate" type="application/rss+xml" href="https://curegit.github.io/nagoya-example/search/index.xml" title="記事検索 | 名古屋サンプルブログ">


    
    











<link rel="stylesheet" href="/nagoya-example/bundle.min.3671a38070bc6fd9ac9cad3ff5059c0dda87564a7af68032294cca2afcb11c69.css">

    <link rel="icon" href="/nagoya-example/icon.png">

    
  <meta property="og:type" content="website">

<meta property="og:site_name" content="名古屋サンプルブログ">

  <meta property="og:title" content="記事検索 | 名古屋サンプルブログ">


<meta property="og:url" content="https://curegit.github.io/nagoya-example/search/">

  <meta property="og:image" content="https://curegit.github.io/nagoya-example/bio.png">


    
  <meta itemprop="name" content="記事検索">





  <meta itemprop="image" content="https://curegit.github.io/nagoya-example/bio.png">

<link itemprop="url" href="https://curegit.github.io/nagoya-example/search/">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
    renderMathInElement(document.body, {
      delimiters: [
        {left: "$$", right: "$$", display: true},
        {left: "$", right: "$", display: false},
        {left: "\\(", right: "\\)", display: false},
        {left: "\\[", right: "\\]", display: true}
      ],
      throwOnError: false
    });
  });
</script>

    

    
  </head>
  <body>
    <div id="container">
      <header id="top">
  <div id="header-grid">
    
      <div id="site-title">
        <a href="/nagoya-example/">名古屋サンプルブログ</a>
      </div>
    
    
      
        <p id="description">Hugo 日本語テーマ「名古屋」のサンプルサイト</p>
      
    
  </div>
</header>

      <div id="middle">
        <div id="content" class="column">
          
          
            <nav id="breadcrumb" class="pane">
              


  
  
  <ol class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
    
      
  
  
    
    
    
      <li><a href="/nagoya-example/">ホーム</a></li>
    
  

      
    
    
    <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" >
      <span itemprop="name">記事検索</span>
      <meta itemprop="position" content="1">
    </li>
  </ol>


            </nav>
          
          
          <main class="pane">
            
  <div class="single">
    <h1 class="list-title">記事検索</h1>
    
  </div>
  <div class="search">
    
      
      
      <div>
        スペースで区切ると AND 検索になります。<br>
        ダブルクオートで囲んだフレーズは完全一致照合になります。<br>
        大文字・小文字は常に区別されません。
      </div>
      <form class="search-form" method="get" id="search-form">
        <input type="text" name="q" id="query">
        <input type="submit" value="検索">
      </form>
      <script>
        (function () {
          const data = "\/nagoya-example\/data.min.be141ed99ed049a7ae5b28e06c0d17ea56c5543721d424506880a59ed2d465f2.json";
          const searcher = "\/nagoya-example\/searcher.min.123ee832749cf4e1f7a9421dbdd56858c9a4159a03b58d16a84b70822cf93747.js";
          const maxConcurrency =  16 ;

          function htmlSpecialChars(text) {
            const table = {
              "&": "&amp;",
              "'": "&apos;",
              "\"": "&quot;",
              "<": "&lt;",
              ">": "&gt;",
            };
            return text.replace(/[&'"<>]/g, (match) => table[match]);
          }

          function htmlTemplate(strings, ...values) {
            let html = strings[0];
            values.forEach((val, i) => {
              html += htmlSpecialChars("" + val) + strings[i + 1];
            });
            return html;
          }

          const searchForm = document.getElementById("search-form");
          const queryInput = document.getElementById("query");

          const contentLoadedPromise = new Promise((resolve) => {
            if (document.readyState === "loading") {
              document.addEventListener("DOMContentLoaded", () => resolve());
            } else {
              resolve();
            }
          });
          const resultElementPromise = contentLoadedPromise.then(() =>
            document.getElementById("search-result")
          );

          const dataPromise = fetch(data).then((response) => {
            if (response.ok) {
              return response.arrayBuffer();
            } else {
              throw new Error(response.statusText);
            }
          }).catch((error) => {
            searchForm.outerHTML = htmlTemplate`
              <p class="error">${"検索用データファイルをダウンロードできません。"}</p>
            `;
            throw error;
          });

          function getQuery(reflectOnForm = true) {
            const params = new URL(window.location).searchParams;
            const query = params.getAll("q").join(" ");
            if (reflectOnForm) {
              queryInput.value = query;
            }
            return query;
          }

          function parse(query) {
            query = query.toLowerCase();
            const phrases = [];
            let buffer = "";
            let quoted = false;
            for (let i = 0; i < query.length; i++) {
              const chara = query[i];
              if (chara === " " || chara === "　") {
                if (quoted) {
                  buffer += chara;
                } else if (buffer) {
                  phrases.push(buffer);
                  buffer = "";
                }
              } else if (chara === "\"") {
                if (query[i + 1] === "\"") {
                  buffer += "\"";
                  i++;
                } else {
                  quoted = !quoted;
                  if (buffer) {
                    phrases.push(buffer);
                    buffer = "";
                  }
                }
              } else {
                buffer += chara;
              }
            }
            if (buffer) {
              phrases.push(buffer);
            }
            return phrases;
          }

          function range(n) {
            return [...Array(n).keys()];
          }

          function divideRangesFairly(len, n) {
            const size = Math.floor(len / n);
            const extra = len % n;
            const ranges = [];
            let start = 0;
            for (let i = 0; i < n; i++) {
              const end = start + size + (i < extra ? 1 : 0);
              ranges.push({start, end});
              start = end;
            }
            return ranges;
          }

          let cancelFetch = null;
          let workers = [];
          let cancelSearchFs = [];

          async function search(phrases) {
            workers.forEach((w) => w.terminate());
            if (cancelFetch !== null) {
              cancelFetch();
            }
            cancelSearchFs.forEach((f) => f());
            cancelSearchFs = [];
            const concurrency = Math.min(navigator.hardwareConcurrency ?? 1, maxConcurrency);
            workers = range(concurrency).map(() => new Worker(searcher));
            const maybeBuffer = await Promise.race([
              dataPromise.catch(() => false),
              new Promise((resolve) => {
                cancelFetch = () => resolve(false);
              })
            ]);
            if (maybeBuffer === false) {
              return false;
            }
            const searchPromises = [];
            for (let i = 0; i < workers.length; i++) {
              const search = new Promise((resolve) => {
                workers[i].onmessage = (e) => {
                  resolve(e.data);
                };
                cancelSearchFs.push(() => {
                  resolve(false);
                });
              });
              searchPromises.push(search);
            }
            const searchPromise = Promise.all(searchPromises).then((xs) => {
              if (xs.includes(false)) {
                return false;
              } else {
                return xs.flat();
              }
            });
            const articles = JSON.parse(new TextDecoder().decode(maybeBuffer));
            const ranges = divideRangesFairly(articles.length, workers.length);
            for (let i = 0; i < workers.length; i++) {
              const arrayBufferCopy = maybeBuffer.slice(0);
              const message = {
                phrases: phrases,
                start: ranges[i].start,
                end: ranges[i].end,
                articleBuffer: arrayBufferCopy,
              };
              workers[i].postMessage(message, [arrayBufferCopy]);
            }
            return await searchPromise;
          }

          async function main() {
            if (window.Worker) {
              const query = getQuery();
              const phrases = parse(query);
              if (phrases.length > 0) {
                const result = await search(phrases);
                if (result !== false) {
                  const element = await resultElementPromise;
                  let html = `<h2>${
                    phrases.map(x => htmlTemplate`<code>${x}</code>`).join("")
                  }</h2>`;
                  if (result.length > 0) {
                    html += htmlTemplate`
                      <p class="info">${"を含む記事が"} ${result.length} ${"件見つかりました。"}</p>
                    `;
                    html += `<ul>${
                      result.map(article => htmlTemplate`
                        <li><a href="${article.link}">${article.title}</a></li>
                      `).join("")
                    }</ul>`;
                  } else {
                    html += htmlTemplate`
                      <p class="info">${"を含む記事は見つかりませんでした。"}</p>
                    `;
                  }
                  element.innerHTML = html;
                }
              } else {
                const element = await resultElementPromise;
                element.innerHTML = "";
              }
            } else {
              const element = await resultElementPromise;
              element.innerHTML = htmlTemplate`
                <p class="warning">${"Web Worker を有効にしてください。"}</p>
              `;
            }
          }

          searchForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const query = queryInput.value;
            const params = new URL(window.location).searchParams;
            if (query) {
              params.set("q", query);
            } else {
              params.delete("q");
            }
            const paramStr = params.toString();
            history.pushState({}, "", paramStr ? "?" + paramStr : ".");
            main();
          });

          window.addEventListener("popstate", (e) => {
            main();
          });

          main();
        })();
      </script>
      <noscript>
        <p class="warning">JavaScript を有効にしてください。</p>
      </noscript>
      <div id="search-result"></div>
    
  </div>

          </main>
          
          
          
          <aside class="pane content-bottom">
  <p>メインカラム上下に広告などのカスタムウィジェットを配置できます。</p>
  <img id="bottom-ad" src="/nagoya-example/ad.png">
</aside>

        </div>
        <aside id="sidebar" class="column">
  <div class="pane sidebar-top">
  <div class="profile">
    <a href="/nagoya-example/pages/bio">
      <img class="avatar" src="/nagoya-example/bio.png">
    </a>
    <div class="name">
      <a href="/nagoya-example/pages/bio">高橋 元</a>
    </div>
  </div>
  <p>サイドバー上下に自己紹介などのカスタムウィジェットを配置できます。</p>
</div>

  
<nav class="pane">
  <ul>
    <li>
      <a href="/nagoya-example/">ホーム</a>
    </li>
    
      <li>
        <a href="/nagoya-example/pages/bio/">自己紹介</a>
      </li>
    
      <li>
        <a href="/nagoya-example/pages/contact/">連絡先</a>
      </li>
    
    
      <li>
        <a href="/nagoya-example/archives/">年別アーカイブ</a>
      </li>
    
    
      <li>
        <a href="/nagoya-example/search/">記事検索</a>
      </li>
    
    
      <li>
        <a href="/nagoya-example/index.xml">RSS</a>
      </li>
    
  </ul>
</nav>

  

  
    
  


  

<nav class="pane">
  
    
  
    <ul class="folders">
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/english/">
            English (2) 
          </a>
          
  

        </li>
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/programming/">
            プログラミング (3) 
          </a>
          
  
    <ul class="folders">
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/programming/python/">
            Python (1) 
          </a>
          
  

        </li>
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/programming/csharp/">
            C# (2) 
          </a>
          
  

        </li>
      
    </ul>
  

        </li>
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/anime/">
            アニメ (4) 
          </a>
          
  
    <ul class="folders">
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/anime/mmppp/">
            ぴちぴちピッチ (1) 
          </a>
          
  

        </li>
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/anime/jcdk/">
            邪神ちゃんドロップキック (3) 
          </a>
          
  
    <ul class="folders">
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/anime/jcdk/characters/">
            キャラクター (2) 
          </a>
          
  

        </li>
      
    </ul>
  

        </li>
      
    </ul>
  

        </li>
      
        
        <li class="folder">
          <a href="/nagoya-example/posts/meta/">
            メタ (3) 
          </a>
          
  

        </li>
      
    </ul>
  

  
</nav>

  

  <nav class="pane">
    
      <header class="component-title">
        <a href="/nagoya-example/tags/">タグ</a>
      </header>
    
    <ul class="tags">
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/cs/">C#</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/dotnet/">.NET</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/html/">HTML</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/hugo/">Hugo</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/javascript/">JavaScript</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/katex/">KaTeX</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/markdown/">Markdown</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/mermaid/">Mermaid</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/python/">Python</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E3%81%B4%E3%81%A1%E3%81%B4%E3%81%A1%E3%83%94%E3%83%83%E3%83%81/">ぴちぴちピッチ</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88/">イベント</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E4%BB%95%E4%BA%8B/">仕事</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E6%95%B0%E5%AD%A6/">数学</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E6%9D%B1%E4%BA%AC/">東京</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E9%82%AA%E7%A5%9E%E3%81%A1%E3%82%83%E3%82%93%E3%83%89%E3%83%AD%E3%83%83%E3%83%97%E3%82%AD%E3%83%83%E3%82%AF/">邪神ちゃんドロップキック</a>
          
        </li>
      
        <li class="tag">
          
            <a href="/nagoya-example/tags/%E9%96%A2%E6%95%B0%E5%9E%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0/">関数型プログラミング</a>
          
        </li>
      
    </ul>
  </nav>


  
  

  
    
      <nav class="pane">
        
          <header class="component-title">
            <a href="/nagoya-example/categories/">カテゴリ</a>
          </header>
        
        <ul>
          
            <li>
              
                <a href="/nagoya-example/categories/%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84/">コンテンツ</a>
              
            </li>
          
            <li>
              
                <a href="/nagoya-example/categories/%E3%83%86%E3%82%B9%E3%83%88/">テスト</a>
              
            </li>
          
            <li>
              
                <a href="/nagoya-example/categories/%E6%8A%80%E8%A1%93/">技術</a>
              
            </li>
          
        </ul>
      </nav>
    
  

  
    
  

  


  
  

  <nav class="pane">
    <header class="component-title">最新記事</header>
    <ul class="dense">
      
        <li>
          <a href="/nagoya-example/posts/anime/jcdk/characters/jashin-chan/">邪神ちゃんの性格</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/programming/csharp/fix/">C# で無名再帰</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/programming/python/prime/">Python で素数列挙</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/anime/mmppp/chara/">ぴちぴちピッチのマーメイドプリンセスまとめ</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/english/web-developer-life/">Working as a Web Developer: A Day in the Life</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/anime/jcdk/characters/yurine/">邪神ちゃんドロップキック キャラクター紹介: 花園ゆりね</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/anime/jcdk/charms/">邪神ちゃんドロップキックの魅力</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/programming/csharp/unit/">C# で Unit 型を実装する</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/english/work-from-home/">5 Tips for Staying Productive While Working from Home</a>
        </li>
      
        <li>
          <a href="/nagoya-example/posts/meta/diagrams/">ダイアグラムと数式の表示</a>
        </li>
      
    </ul>
  </nav>


  
</aside>

      </div>
      <footer id="bottom">
  <small>
    <a href="/nagoya-example/">
      <span>名古屋サンプルブログ</span>
    </a>
    <wbr>
    <span>
      
        
        
          ©&nbsp;2021–2023
        
        
          
            <a href="https://github.com/curegit/nagoya"><em>高橋 元</em></a>
          
        
      
    </span>
    <br>
    <span>
      <a href="https://github.com/curegit/nagoya"><i>Nagoya</i>&nbsp;Theme</a>&nbsp;by&nbsp;<a href="https://curegit.jp/"><i>curegit</i></a>.
      <wbr>
      Built&nbsp;with&nbsp;Hugo.
    </span>
  </small>
</footer>

    </div>
  </body>
</html>
